
### Class: \Conifer\Form\AbstractBase (abstract)

> Abstract form base class, encapsulating the Conifer Form API Example usage: ```php use Conifer\Form\AbstractBase; class EmployeeForm extends AbstractBase { public function __construct() { $this->fields = [ 'user_login' => [ 'label' => 'Username', 'validators' => [ [$this, 'validate_required_field'], [$this, 'validate_login'] ], ], 'user_email' => [ 'label' => 'Email', 'validators' => [[$this, 'validate_email']], ], 'first_name' => [ 'label' => 'First Name', 'validators' => [ [$this, 'validate_required_field'], [$this, 'validate_name'] ], ], 'last_name' => [ 'label' => 'Last Name', 'validators' => [ [$this, 'validate_required_field'], [$this, 'validate_name'] ], ], ]; } public function validate_email(array $emailField, string $email) { // We can call other pre-defined validators here $valid = $this->validate_required_field($emailField, $email); if ($valid) { // End-user specified an email, but is it valid? $valid = !empty(filter_var($email, FILTER_VALIDATE_EMAIL)); if (!$valid) { // NOPE. $this->add_error($emailField, 'invalid email!'); } } return $valid; } public function validate_name(array $nameField, string $name) { // We can get as simple as we want to! // Here we're just checking that $name matches a certain value. $valid = $name === 'Bob'; if (!$valid) { $this->add_error($nameField, 'only people name Bob are worthy'); } return $valid; } public function validate_login(array $loginField, string $login, array $submission) { // The validate() method passes all submitted data to each validator. // So, if you need to, you can look at other fields: $leet = $login === $submission['name'].'_x1337x'; // Check if the login is cool enough. if (!$leet) { $this->add_error( $loginField, 'You login is not cool enough. It must be your name plus the string "_x1337x".' ); } return $leet; } } ``` Note that for a given field, "validators" is a list of callbacks. Validators define their own error messaging; that is, if a validator method finds that a field is invalid for some reason, it is responsible for adding an error message for that field. While this is a little more work, it allows for fine-grained control over the order in which fields are validated, and the messages that are displayed for specific reasons.

| Visibility | Function |
|:-----------|:---------|
| public | <strong>__construct(</strong><em>array</em> <strong>$files=null</strong>)</strong> : <em>void</em><br /><em>Constructor</em> |
| public | <strong>add_error(</strong><em>\string</em> <strong>$fieldName</strong>, <em>\string</em> <strong>$message</strong>)</strong> : <em>void</em><br /><em>Add an error message to a specific field. You can also add errors to the form globally or to some aspect of the form, as long as you use the same $fieldName to refer to it at render time using get_errors_for().</em> |
| public | <strong>checked(</strong><em>string</em> <strong>$field</strong>, <em>string</em> <strong>$value=null</strong>)</strong> : <em>bool true if the field was checked</em><br /><em>Whether or not `$field` was checked in the submission, optionally matching on `$value` (e.g. for radio buttons). necessary e.g. for radio inputs, where there's more than one possible value.</em> |
| public static | <strong>create_from_submission(</strong><em>mixed</em> <strong>$args</strong>)</strong> : <em>[\Conifer\Form\AbstractBase](#class-coniferformabstractbase-abstract) the form object</em><br /><em>Create a new instance from the request array (e.g. $_POST) and return the hydrated form object. Takes a variable number of arguments, but the first argument MUST be the submitted values, as an associative array. The remaining arguments, if any, are passed to the constructor.</em> |
| public | <strong>get(</strong><em>mixed</em> <strong>$field</strong>)</strong> : <em>the submitted value, or the existing persisted value if no value has been submitted, or otherwise null.</em><br /><em>Get the current value for the given form field.</em> |
| public | <strong>get_error_messages_for(</strong><em>\string</em> <strong>$fieldName</strong>)</strong> : <em>array an array of error message strings</em><br /><em>Get error messages for a specific field</em> |
| public | <strong>get_errors()</strong> : <em>array</em><br /><em>Get the errors collected while processing this form, if any</em> |
| public | <strong>get_errors_for(</strong><em>\string</em> <strong>$fieldName</strong>)</strong> : <em>array an array of error arrays</em><br /><em>Get errors for a specific field</em> |
| public | <strong>get_field(</strong><em>\string</em> <strong>$name</strong>)</strong> : <em>array/null the field, or null if it doesn't exist</em><br /><em>Get a field by its name</em> |
| public | <strong>get_fields()</strong> : <em>array an array of form fields.</em><br /><em>Get the fields configured for this form</em> |
| public | <strong>get_file(</strong><em>\string</em> <strong>$field</strong>)</strong> : <em>array An array of data for the given file upload. Will be empty if the field doesn't exist or an error occurred during upload.</em><br /><em>Get an uploaded file by field name</em> |
| public | <strong>get_file_upload_error_message(</strong><em>array</em> <strong>$field</strong>, <em>\integer</em> <strong>$errorCode</strong>)</strong> : <em>string The error message, based on the specified upload error code</em><br /><em>Returns an error message for a given file upload field, based on the provided PHP upload error code.</em> |
| public | <strong>get_files()</strong> : <em>array an array of uploaded files.</em><br /><em>Get the files configured uploaded to this form</em> |
| public | <strong>get_unique_error_messages()</strong> : <em>array</em><br /><em>Get all unique error messages as a flat array, e.g. for displaying in a list at the top of the <form> element</em> |
| public | <strong>get_whitelisted_fields(</strong><em>array</em> <strong>$submission</strong>)</strong> : <em>array the whitelisted fields</em><br /><em>Get the submitted values, filtered down to only fields decared in the constructor</em> |
| public | <strong>has_errors()</strong> : <em>bool</em><br /><em>Whether this form has any validation errors</em> |
| public | <strong>has_errors_for(</strong><em>\string</em> <strong>$fieldName</strong>)</strong> : <em>bool</em><br /><em>Whether the field `$fieldName` has any validation errors</em> |
| public | <strong>hydrate(</strong><em>array</em> <strong>$submission</strong>)</strong> : <em>[\Conifer\Form\AbstractBase](#class-coniferformabstractbase-abstract) this form instance</em><br /><em>Hydrate this form object with the submitted values</em> |
| public | <strong>abstract process(</strong><em>array</em> <strong>$request</strong>)</strong> : <em>void</em><br /><em>Process the form submission.</em> |
| public | <strong>require(</strong><em>array</em> <strong>$field</strong>, <em>\string</em> <strong>$value</strong>)</strong> : <em>boolean</em><br /><em>Alias of validate_required_field</em> |
| public | <strong>require_file(</strong><em>array</em> <strong>$field</strong>)</strong> : <em>boolean</em><br /><em>Alias of validate_required_file</em> |
| public | <strong>selected(</strong><em>\string</em> <strong>$field</strong>, <em>mixed</em> <strong>$optionValue</strong>)</strong> : <em>bool</em><br /><em>Whether `$field` was selected with the value `$optionValue`. ```php if ($form->selected('company_to_contact', 'acme')) { $acmeClient = new AcmeClient(); $acmeClient->sendMessage('Someone chose you!'); } ``` actual submitted value</em> |
| public | <strong>set_files(</strong><em>array</em> <strong>$files=null</strong>)</strong> : <em>[\Conifer\Form\AbstractBase](#class-coniferformabstractbase-abstract) This form instance</em><br /><em>Set the uploaded files for this form, generally to the contents of the $_FILES superglobal.</em> |
| public | <strong>succeeded()</strong> : <em>boolean</em><br /><em>Whether this form has been processed without errors</em> |
| public | <strong>validate(</strong><em>array</em> <strong>$submission</strong>)</strong> : <em>boolean whether the submission is valid</em><br /><em>Check field values according to their respective validators, returning whether all validations pass. NOTE: This doesn't add any errors explicitly; specific validators are responsible for that.</em> |
| public | <strong>validate_file_mime_type(</strong><em>array</em> <strong>$field</strong>, <em>\string</em> <strong>$value</strong>, <em>array</em> <strong>$submission</strong>, <em>array</em> <strong>$validTypes=array()</strong>)</strong> : <em>boolean</em><br /><em>Check if the specified file upload field submission matches an array of whitelisted mime types</em> |
| public | <strong>validate_file_upload(</strong><em>array</em> <strong>$field</strong>)</strong> : <em>boolean</em><br /><em>Check whether the specified file field has an upload error, adding an error if so.</em> |
| public | <strong>validate_required_field(</strong><em>array</em> <strong>$field</strong>, <em>\string</em> <strong>$value</strong>)</strong> : <em>boolean</em><br /><em>Check whether a value was submitted for the given field, adding an error if not.</em> |
| public | <strong>validate_required_file(</strong><em>array</em> <strong>$field</strong>)</strong> : <em>boolean</em><br /><em>Check whether a required file upload was submitted, adding an error if not.</em> |
| protected | <strong>execute_validator(</strong><em>mixed</em> <strong>$validator</strong>, <em>array</em> <strong>$field</strong>, <em>array</em> <strong>$submission</strong>)</strong> : <em>boolean</em><br /><em>Execute a single field validator any errors raised</em> |
| protected | <strong>filter_field(</strong><em>array</em> <strong>$field</strong>, <em>mixed</em> <strong>$value</strong>)</strong> : <em>mixed the filtered value</em><br /><em>Filter a submitted field value using the field's declared filter logic, if any. If a field default is provided, the default is applied *after* the filter (that is, to the result of the filter callback).</em> |
| protected | <strong>throw_files_exception_if_not_set()</strong> : <em>void</em><br /><em>Throws an exception if the files property is null</em> |
| protected | <strong>validate_field(</strong><em>array</em> <strong>$field</strong>, <em>array</em> <strong>$submission</strong>)</strong> : <em>boolean</em><br /><em>Validate a single field MUST include at least a `name` index.</em> |

